box: wercker/nodejs
build:
    steps:
        - script:
            name: Install npm packages
            code: npm install
        - script:
            name: Replace singleRun with true
            code: sed -i '/singleRun/c\singleRun:true' karma.conf.js
        - grunt:
            tasks: default
        - script:
            name: Run unit tests
            code: ./node_modules/karma/bin/karma start
    after-steps:
        - sherzberg/slack-notify:
            subdomain: razorpay
            token: $SLACK_TOKEN
            channel: general