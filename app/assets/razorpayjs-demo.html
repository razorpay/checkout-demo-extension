<!doctype html>
<html>
<head>
    <title>Razorpay - Testing page</title>
    <script src="razorpay.js"></script>
    <link href="//yegor256.github.io/tacit/tacit.min.css" rel="stylesheet"></link>
</head>

<body>
<table align="center"  width="100%" >
    <tr>
    <td align = "left" width = "90%"><font  size = 5 color = darkblue face = verdana ><b>Testing Page</b></td>
    <td align = "right"width = "10%"><img SRC="" WIDTH="169" HEIGHT="37" BORDER="0" ALT=""></td>
    </tr>
</table>
<br><br>
<table align="center">
    <tr>
    <th colspan="50" bgcolor="brown" ><font  size = 2 color = White face = verdana >Enter Parameters</th>
    </tr>
    <tr>
        <td colspan="40">Select Method: </td>
        <td>
            <select name="method">
                <option value="netbanking">Net Banking</option>
                <option value="card" selected>Card</option>
                <option value="wallet">Wallet</option>
            </select>
        </td>
    </tr>
    <tr>
        <td colspan="40">Select Bank (Only if net banking): </td>
        <td>
            <select name="bank" id="banklist">
            </select>
        </td>
    </tr>
    <tr>
        <td colspan="40">Select Wallet (if wallet)</td>
        <td>
            <select name="wallet">
                <option value="paytm">Paytm</option>
            </select>
        </td>
    </tr>
    <tr>
        <td colspan="40">Card No: </b> </td>
        <td><input type="text" name="card[number]" value="4012001038443335" size="25"></td>
    </tr>
    <tr>
        <td colspan="40">CVV:</td>
        <td><input size="3" type="text" name="card[cvv]" value="880" maxlength=4></td>
    </tr>
    <tr>
        <td colspan ='40'>Exp Date:</td>
        <td><input type="text" name="card[expiry_month]" value="11"></td>
        <td><input type="text" name="card[expiry_year]" value="2015"></td>
        <tr>
            <td colspan='40'>Amount:</td>
            <td><input type="text" name="amount" size="25" value="500"></td>
        </tr>
        <tr>
            <td colspan='40'>CardHolder/Member Name:</td>
            <td><input type="text" name="card[name]" size="25" value="shashank"></td>
            <td><input type="text" name="email" size="25" value="shk@gmail.com"></td>
            <td><input type="text" name="contact" size="25" value="1234567890"></td>
            <input type="hidden" value="INR" name="currency">
        </tr>
    </tr>
    <tr>
        <td colspan="100" align="center"><input class="" type="submit" value="Submit" id="pay"></td>
    </tr>
</table>
<script>
    Razorpay.configure({key: 'rzp_test_1DP5mmOlF5G5ag'});

    Razorpay.payment.getMethods(function(response){
        var h = '';
        for(var i in response.netbanking){
            h += '<option value="'+i+'">'+response.netbanking[i]+'</option>';
        }
        document.getElementById('banklist').innerHTML = h;
    })

    document.getElementById('pay').onclick = function(){
      var data = {};
      Array.prototype.forEach.call(document.querySelectorAll('[name]'), function(element){
        data[element.name] = element.value;
      });
      
      // remove useless fields
      if(data.method == 'card'){
        delete data.bank;
        delete data.wallet;
      }
      else {
        for(var i in data){
            if(/^card/.test(i))
                delete data[i];
        }
        if(data.method == 'netbanking'){
            delete data.wallet;
        } else {
            delete data.netbanking;
        }
      }
      console.log(data); // this is what is needed to be passed to Razorpay.payment.authorize

      Razorpay.payment.authorize({
        data: data,
        success: function(response){alert('payment success: ' + response.razorpay_payment_id)},   // callback for payment success
        error: function(response){alert('failure: ' + JSON.stringify(response))}         // callback for payment failure
      })
    }

</script>
</body>
</html>