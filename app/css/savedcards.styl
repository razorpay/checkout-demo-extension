@require 'common';

$cardHeights = {
  default: 46px,
  open: 92px,
  debitPin: 110px,
  debitPinMaestro: 142px
};
$savedcontainerh = 220px;
$cardpl = 70px;

.left-card {
  display: none;
  padding: 0 20px 0 $cardpl;
  height: $cardHeights['default'];
  left: 0;
  right: 0;
}

#toggle-saved-cards {
  padding: 6px 0;
  cursor: pointer;
  margin: 0 0 2px;
  display: none;
}

#show-saved-cards {
  line-height: $cardHeights['default'];
  display: none;
  cursor: pointer;
  position: absolute;
  transition: 0.2s;
  transition-delay: 0.15s;
  z-index: 1;
}

#should-save-card {
  display: none;
}

#savedcards-recurring-message{
  display: none;
}
#form-card {
  .saved-card {
    pointer-events: none;
  }
  &:not(.saved-cards) {
    #saved-cards-container {
      margin-bottom: -8px;
    }
  }
  &.saved-cards {
    #elem-emi {
      display: none;
    }
    #show-saved-cards {
      transition-delay: 0s;
      opacity: 0;
      pointer-events: none;
    }
    #show-add-card {
      opacity: 1;
    }

    .maestro-cvv {
      display: block;
      margin-left: -46px;
      font-size: 13px;
      line-height: 32px;
    }

    .saved-card {
      height: $cardHeights['open'];
      max-height: $cardHeights['default'];
      overflow: hidden;
      z-index: 2;
      pointer-events: all;

      &[emi].checked, &[maestro].checked {
        max-height: $cardHeights['open'];

        .elem-savedcards-emi {
          display: block;
        }
      }

      &[pin] {
        &.checked {
          height: $cardHeights['debitPin'];
          max-height: $cardHeights['debitPin'];
          overflow: hidden;
          .flow-selection-container {
            display: block;
          }

          &[maestro] {
            height: $cardHeights['debitPinMaestro'];
            max-height: $cardHeights['debitPinMaestro'];
          }
        }
      }

      &.checked {
        background: #eff0f1;
        border-color: $bc;
        .saved-cvv {
          pointer-events: auto;
          opacity: 1;
        }
      }
    }
    .saved-inner{
      opacity: 1;
    }
    .cardtype {
      transform: none;
    }
    #add-card-container {
      height: 55px;
      opacity: 0;
      transform: translateY(-10px);
      z-index: 0;
    }
    #show-add-card + .pad {
      pointer-events: none;
    }
    #savedcards-recurring-message {
      display: block;
    }
    #addcard-recurring-message {
      display: none;
    }
  }
  &.has-cards {
    #saved-cards-container,
    #show-saved-cards {
      display: block;
    }
  }
}

#body[tab=emi] #form-card.saved-cards {
  .saved-card {
    &:not([emi]) {
      .saved-inner, .cardtype {
        opacity: 0.3;
      }
    }
  }
}

.saved-card:last-child:not(:first-child) .cardtype {
  transform: translateX(-3px) translateY(-1px) rotateZ(-10deg);
}

#add-card-container {
  transition: 0.2s;
  height: 166px;
  z-index: 2;
  position: relative;

  .card-fields {
    .elem-wrap {
      height: auto;
      margin-bottom: 8px;

      &:nth-last-child(1),
      &:nth-last-child(2) {
        margin-bottom: 16px;
      }
    }
  }

  .elem {
    label {
      top: 24px;
    }
    .input {
      padding: 24px 0 4px 0;
    }
  }

  .flow-selection-container {
    &:not(.drishy) {
      opacity: 0;
      position: absolute;
      z-index: -1;
      pointer-events: none;
    }

    transition: all 0.15s ease-in;
    width: 100%;
    margin-top: 16px;

    &>label {
      text-transform: uppercase;
      color: rgba(0,0,0,0.64);
      font-size: 12px;
      letter-spacing: 1px;
      display: block;
      margin-bottom: 4px;
    }

    .flow {
      display: inline-block;
      width: 49%;
    }
  }
}

.saved-card {
  cursor: pointer;
  height: 0;
  transition: 0.2s;
  position: relative;
  background: #fff;

  .elem-wrap {
    height: auto;
    margin-left: -44px;
  }

  .elem-savedcards-emi {
    padding: 0px;
    display: none;

    i {
      bottom: -5px;
    }

    .help.up {
      margin-bottom: 0;
    }
  }

  .flow-selection-container {
    display: none;
    padding-bottom: 8px;
    .flow {
      &:not(:last-child) {
        margin: 4px 0;
      }
      &:last-child {
        margin-top: 4px
      }
    }
  }
}

.saved-inner {
  opacity: 0;
  transition: 0.2s;
}

.saved-number {
  &::before {
    content: 'Card ending with';
    color: #777;
    margin-right: 4px;
  }
}

#saved-cards-container {
  display: none;
  position: relative;
  line-height: $cardHeights['default'];
  min-height: $cardHeights['default'];
  padding-bottom: 1px;
  max-height: $savedcontainerh;

  &.scroll {
    overflow-y: auto;
  }

  .card-delete {
    display: none;
    position: absolute;
    top: 10px;
    right: 10px;
    transition: 0.2s;
  }

  .saved-cvv {
    opacity: 0;
    position: absolute;
    right: 24px;
    top: 8px;
    pointer-events: none;
    transition: 0.3s;
    padding: 5px;
    width: 36px;
    border-bottom: 1px solid #ccc;
  }

  .cardtype {
    top: 0;
    transition: 0.2s;

    &[cardtype=amex] {
      border-color: #0189CF;
      background: linear-gradient(to bottom, #53AEF5, #0167A9);
    }
    &[cardtype=maestro] {
      background: linear-gradient(to bottom, #FBD51F, #EFA010);
      border-color: #DAB608;
    }
  }
}

#saved-cards-container .cardtype,
#show-add-card::before {
  position: absolute;
  z-index: 1;
  content: '';
  border: 1px solid #ccc;
  border-radius: 2px;
  width: 32px;
  height: 21px;
  margin-top: 12px;
  background: linear-gradient(to bottom, white, #eee);
  left: 24px;
  text-align: center;
  line-height: 20px;
  font-size: 20px;
  color: #777;
  font-weight: bold;

}

#show-add-card {
  transition: 0.2s;
  cursor: pointer;
  line-height: $cardHeights['default'];
  position: absolute;
  z-index: 1;
  opacity: 0;
  &::before {
    display: inline-block;
    content: '+';
  }
}

#elem-card {
  .cardtype {
    position: absolute;
    right: 0;
    bottom: 10px;
  }
}

#nocvv-check {
  margin: 10px 0 0;
  position: relative;
  z-index: 10;
}

.save-enabled {
  .left-card,
  #should-save-card {
    display: block;
  }

  #add-card-container {
    height: 196px;
  }
}

.cardtype::before {
  content: '';
  background: no-repeat url('data:image/png;base64,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');
  height: 11px;
  width: 35px;
  background-size: 600%;
  margin: 5px 0 0 -2px;
  background-position: -20%;
  display: block;
}

[cardtype=visa]::before {
  background-position: 0;
}

[cardtype=amex]::before {
  background-position: 100%;
}

[cardtype=diners]::before {
  background-position: 60%;
}

[cardtype=maestro]::before {
  background-position: 40%;
}

[cardtype=mastercard]::before {
  background-position: 20%;
}

[cardtype=rupay]::before {
  background-position: 80%;
}

.saved-cards
  #add-card-container
    input
      display: none !important
